---
# tasks file for zabbix-templates-role
- name: Importing template
  uri:
    url: "{{ zabbix_url }}"
    method: POST
    body: '{ "jsonrpc": "2.0", "method": "configuration.import", "params": { "format": "xml", "rules": { "applications": {"createMissing": true}, "templates": { "createMissing": true, "updateExisting": true }, "items": {"createMissing": true}, "groups": {"createMissing": true} }, "source": "<?xml version=\"1.0\" encoding=\"UTF-8\"?> <zabbix_export> <version>3.2</version> <date>2017-05-08T14:30:19Z</date> <groups> <group> <name>Application hosts</name> </group> </groups> <templates> <template> <template>Reform Application Health Status</template> <name>Reform Application Health Status</name> <description>Templates for application hosts</description> <groups> <group> <name>Application hosts</name> </group> </groups> <applications> <application> <name>Reform application</name> </application> </applications> <items> <item> <name>Application Health</name> <type>2</type> <snmp_community/> <multiplier>0</multiplier> <snmp_oid/> <key>health.status</key> <delay>0</delay> <history>7</history> <trends>0</trends> <status>0</status> <value_type>4</value_type> <allowed_hosts/> <units/> <delta>0</delta> <snmpv3_contextname/> <snmpv3_securityname/> <snmpv3_securitylevel>0</snmpv3_securitylevel> <snmpv3_authprotocol>0</snmpv3_authprotocol> <snmpv3_authpassphrase/> <snmpv3_privprotocol>0</snmpv3_privprotocol> <snmpv3_privpassphrase/> <formula>1</formula> <delay_flex/> <params/> <ipmi_sensor/> <data_type>0</data_type> <authtype>0</authtype> <username/> <password/> <publickey/> <privatekey/> <port/> <description/> <inventory_link>0</inventory_link> <applications> <application> <name>Reform application</name> </application> </applications> <valuemap/> <logtimefmt/> </item> </items> <discovery_rules/> <httptests/> <macros/> <templates/> <screens/> </template> </templates> </zabbix_export>" }, "id": 2, "auth": "{{ zabbix_token }}" }'
    body_format: json
    status_code: 200
